#cloud-config
# yaml-language-server: $schema=file:///C:/Users/basak/tukks/scope-infra/packer/hyper-v-packer-templates/http/autoinstall-schema.json

autoinstall:
  version: 1
  identity:
    hostname: ubuntu-20-packer
    username: ubuntu
    password: '$6$wdAcoXrU039hKYPd$508Qvbe7ObUnxoj15DRCkzC3qO7edjH0VV7BPNRDYK4QR8ofJaEEF2heacn0QgD.f8pO8SNp83XNdWG6tocBM1'   
  # early-commands:
    # - ping -c4 172.20.144.1
  ## Note: The only dhcp-default-provider network is “default switch”, but it can change its address range ...  
  ## Note: route-metric parameter can be supplied, to immitate default routes ?? dhcp4-overrides: \\n route-metric: 100
  ##        https://askubuntu.com/questions/1042582/how-to-set-default-route-with-netplan-ubuntu-18-04-server-2-nic
  network:
    version: 2
    ethernets:
      - eth0: {dhcp4: true, dhcp-identifier: mac}
      # - eth1: {dhcp4: true, dhcp-identifier: mac}
  ssh:
    install-server: true
  late-commands:
    - ping -c4 192.168.1.111
    # - sed -i 's/^#*\(send dhcp-client-identifier\).*$/\1 = hardware;/' /target/etc/dhcp/dhclient.conf
    # - 'sed -i "s/dhcp4: true/&\n      dhcp-identifier: mac/" /target/etc/netplan/00-installer-config.yaml'
